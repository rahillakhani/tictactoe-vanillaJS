<!DOCTYPE html>
<html>
<head>
  <title>
    TicTacToe by Rahil Lakhani
  </title>
  <style>
  .tic-tac-container {
    width: 350px;
    margin: 0 auto;
  }

  .tic-tac-container button {
    display: inline-block;
    width: 100px;
    background-color: #fff;
    border: 1px solid #333;
    height: 100px;
  }
</style>
</head>
<body>

<div class="tic-tac-container">
  <button></button><button></button><button></button><button></button><button></button><button></button><button></button><button></button><button></button>
</div>

<script type="text/javascript">
/*
1. on click flag for p1 and p2 
2. atleast 5 moves and max of 9
3. series check for cross and nots 
  a. length x 3
  b. height x 3
  c. across x 2
  8 combinations in all.
4. reselection cannot be done.
*/
var btnArr  = document.getElementsByTagName('button');
var pl = 0, moves = 0;
for(i=0;i<btnArr.length;i++){
  btnArr[i].id=("tt"+i);
  btnArr[i].addEventListener('click', tictac);
}

function tictac(){
  if(this.style.backgroundColor == "" || this.style.backgroundColor == null)
  {
    this.style.backgroundColor = playerswitch(this);
  }
}

function playerswitch(elem){
  console.log(moves);
  moves++;
  if(pl == 0){
    pl = 1;
    elem.style.backgroundColor = 'red';
  } else {
    elem.style.backgroundColor = 'green';
    pl = 0;
  }
  if(moves >= 4 && moves < 8){
    checkmatch(elem);
  } else if (moves == 8) {
    endGame();
  }
}
function checkmatch(elem){
  var id = parseInt(elem.id.match(/\d+/)[0]);

  if(id%3 == 0){
    horizonCheck(id);
  } else if(id%3 == 1){
    horizonCheck(id-1);    
  } else if(id%3 == 2){
    horizonCheck(id-2);
  }

  if(id == 0 || id == 4 || id == 8){
    diagonal1(id);
  }
  if(id == 2 || id == 4 || id == 6){
    diagonal2(id)
  }



  if(id <= 5 && id > 2) {
    id = id - 3;
  }
  else if(id <= 8 && id > 5) {
    id = id - 6;
  }
  verticalCheck(id);

}

function horizonCheck(id){
  var checkElem = document.getElementById('tt'+id);
  var eleVal = document.getElementById('tt'+id).style.backgroundColor;
  var eleVal2 = document.getElementById('tt'+(id+1)).style.backgroundColor;
  var eleVal3 = document.getElementById('tt'+(id+2)).style.backgroundColor;
  if(eleVal == eleVal2 && eleVal2 == eleVal3 && !(eleVal == "#fff")) {
    // console.log(pl,'win');
    endGame((pl+1)+' win');

  }

}

function verticalCheck(id){
  var checkElem = document.getElementById('tt'+id);
  var eleVal = document.getElementById('tt'+id).style.backgroundColor;
  var eleVal2 = document.getElementById('tt'+(id+3)).style.backgroundColor;
  var eleVal3 = document.getElementById('tt'+(id+6)).style.backgroundColor;
  if(eleVal == eleVal2 && eleVal2 == eleVal3 && !(eleVal == "#fff")) {
    // console.log(pl,'win');
    endGame((pl+1)+' win');

  }

}

function diagonal1(id){
  var newid = id
  if ( newid > 0) {
    newid = 0;
  }
  var eleVal = document.getElementById('tt'+newid).style.backgroundColor;
  var eleVal2 = document.getElementById('tt'+(newid+4)).style.backgroundColor;
  var eleVal3 = document.getElementById('tt'+(newid+8)).style.backgroundColor;

  if(eleVal == eleVal2 && eleVal2 == eleVal3 && !(eleVal == "#fff")) {
    // console.log(pl,'win');
    endGame((pl+1)+' win');

  }
}



function diagonal2(id){
  var newid = id
  if ( newid > 0) {
    newid = 0;
  }
  var eleVal2 = document.getElementById('tt'+(newid+4)).style.backgroundColor;
  var eleVal4 = document.getElementById('tt'+(newid+2)).style.backgroundColor;
  var eleVal5 = document.getElementById('tt'+(newid+6)).style.backgroundColor;

  if(eleVal4 == eleVal2 && eleVal2 == eleVal5 && !(eleVal4 == "#fff")) {
    // console.log(pl,'win');
    endGame((pl+1)+' win');

  }
}



function endGame(msg){
  for(i=0;i<btnArr.length;i++){
    btnArr[i].id=("tt"+i);
    btnArr[i].removeEventListener('click', tictac);
    console.log('Player', msg);
  }
}

//   var btn = document.getElementsByTagName('button');
//   var tic=0;
//   var tac=1;
//   var moves = 0;
//   for(i = 0; i < document.getElementsByTagName('button').length; i++) {
//     document.getElementsByTagName('button')[i].id="tic"+(i+1);
//     document.getElementsByTagName('button')[i].addEventListener('click', ticPlay);

//   }
//   function ticPlay(){
//     movecheck(this);
//     if (moves >= 5)
//     {
//       wincheck(this);
//     }
//     if (moves >= 9)
//     {
//       console.log("game over");
//       return
//     }
//   }
// function wincheck(elem){
//   this.elem = elem;
//   var loc = elem.id;

//   switch(loc) {
//     case "tic1": 
//     height(elem);
//     length(elem);
//     console.log("clicked", loc)
//     // console.log('length height diagonal');
//     break;
//     case "tic2": 
//     height(elem);
//     console.log("clicked", loc)
//     // console.log('height');
//     break;
//     case "tic3": 
//     height(elem);
//     length(elem);
//     console.log("clicked", loc)
//     // console.log('length height diagonal2');
//     break;
//     case "tic4": 
//     length(elem);
//     height(elem);
//     console.log("clicked", loc)
//     // console.log('length height');
//     break;
//     case "tic5":
//     height(elem);
//     length(elem);
//     console.log("clicked", loc)
//     // console.log('length height diagonal diagonal2');
//     break;
//     case "tic6": 
//     height(elem);
//     length(elem);
//     console.log("clicked", loc)
//     // console.log('length height');
//     break;
//     case "tic7": 
//     height(elem);
//     length(elem);
//     console.log("clicked", loc)
//     // console.log('length height diagonal2');
//     break;
//     case "tic8":
//     height(elem);
//     console.log("clicked", loc)
//     // console.log('height');
//     break;
//     case "tic9": 
//     height(elem);
//     length(elem);
//     console.log("clicked", loc)
//     // console.log('length height diagonal');
//     break;
//     default:
//   }
// }

// /*

// iterate in block

// height (pos%3)
//    =1  1col
//    =2  2col
//    =0  3col

// */


// function height(elem){
//   this.elemPos = elem.id.match(/\d+/)[0];
//   console.log(elemPos);


//   if(elemPos == 1 || elemPos == 2 || elemPos == 3) {
//     elem1 = elem.style.backgroundColor || "";
//     elem2 = document.getElementById('tic' + (parseInt(elemPos)+3)).style.backgroundColor || "";
//     elem3 = document.getElementById('tic' + (parseInt(elemPos)+6)).style.backgroundColor || "";
//     console.log(elem1, "1",elem2, "2",elem3);

//     console.log(elem1 === elem2 && elem2 === elem3);
//   }

// }
// // if(elemPos == 3 || elemPos == 6 || elemPos == 9 ) {
// //   elem1 = elem.style.backgroundColor;
// //   elem2 = document.getElementById('tic' + (elemPos+1)).style.backgroundColor;
// //   elem3 = document.getElementById('tic' + (elemPos+2)).style.backgroundColor;
// //   if(elem1 == elem2 == elem3){
// //     return console.log('len1 winner');          
// //   }
// // }

// function length(elem){
//   this.elemPos = elem.id.match(/\d+/)[0];
//   if(elemPos == 1 || elemPos == 4 || elemPos == 7)
//   {
//     lengthwinner(elem);
//   }
// }
// function lengthwinner(elem){
//   currentPl = elem.style.backgroundColor;
//   console.log(currentPl);

//   if(elemPos == 1 || elemPos == 4 || elemPos == 7 ) {
//     elem1 = elem.style.backgroundColor;
//     elem2 = document.getElementById('tic' + (parseInt(elemPos)+1)).style.backgroundColor;
//     elem3 = document.getElementById('tic' + (parseInt(elemPos)+2)).style.backgroundColor;

//     if(elem1 === elem2 && elem2 === elem3){
//       return console.log('len1 winner');          
//     }
//   }
// }
// function movecheck(elem){
//   this.elem = elem;
//   if(tic == 0){
//     if(elem.style.backgroundColor == 'green'){
//       return
//     } else {
//       if(!elem.style.backgroundColor){
//         elem.removeEventListener('click', ticPlay);
//         moves++;
//       }
//       tic=1;
//       tac=0;
//       elem.style.backgroundColor = 'red';

//     }
//   }
//   else {
//     if(elem.style.backgroundColor == 'red'){
//       return
//     } else {
//       if(!elem.style.backgroundColor){
//         elem.removeEventListener('click', ticPlay);
//         moves++;
//       }
//       tic=0;
//       tac=1;
//       elem.style.backgroundColor = 'green';
//     }
//   }
// }

</script>

</body>
</html>
